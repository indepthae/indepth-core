<%if (rtl?)%>
  <%=stylesheet_link_tag "rtl/gray_table_design"%>
<%else%>
  <%=stylesheet_link_tag "gray_table_design"%>
<%end%>
<div id="content-header">
    <%= show_header_icon %>
    <h1><%= t('instant_fees_text') %></h1>
    <div class='header-sep'>|</div>
    <div class='sub-header'><%= t('transaction_report') %></div>

</div>
<div id="page-yield">
    <div class="bread_crumb">
        <% breadcrumb :instant_fees_report_detail, [@instant_fee,[@start_date,@end_date]] %>
        <%= render_breadcrumbs  %>
    </div>
    <% total =0 %>

    <b id="fees_report_title"><%= t('instant_fees_transaction_report')  %></b>

    <div class ="extender"></div>
    <div class="report-detail">
        <div class="report_left">
            <div class ="report-detail-left">
                <div class="report-detail-left-name"><span><%= t('reciept') %></span></div>
                <div class="report-detail-left-value"><b><%=":  #{ @instant_fee.finance_transaction.receipt_number}" %></b></div>
            </div>
            <div class ="report-detail-left">
                <div class="report-detail-left-name"><span> <%= t('date_text') %> </span></div>
                <div class="report-detail-left-value"><b><%= ":  #{ format_date(@instant_fee.pay_date,:format=>:long)}" %></b></div>
            </div>
            <div class ="report-detail-left">
                <div class="report-detail-left-name"><span> <%= t('category') %></span></div>
                <div class="report-detail-left-value"><b><%=": #{@instant_fee.category_name}" %></b></div>
            </div>
            <div class ="report-detail-left">
                <div class="report-detail-left-name"><span> <%= t('category_description') %></span></div>
                <div class="report-detail-left-value"><b><%=": #{@instant_fee.category_description}" %></b></div>
            </div>
            <div class ="report-detail-left">
                <div class="report-detail-left-name"><span> <%= t('payee') %></span></div>
                <div class="report-detail-left-value"><b><%= ":  #{shorten_string(@instant_fee.payee_name,20)}"%></b></div>
            </div>

            <div class ="report-detail-left">
                <div class="report-detail-left-name"><span> <%= t('payment_mode') %></span></div>
                <div class="report-detail-left-value"><b><%=": #{@instant_fee.finance_transaction.payment_mode}" %></b></div>
            </div>
            <div class ="report-detail-left">
                <div class="report-detail-left-name"><span> <%= t('payment_notes') %></span></div>
                <div class="report-detail-left-value"><b><%= ":  #{@instant_fee.finance_transaction.payment_note}"%></b></div>
            </div>
        </div>
    </div>
    <div class ="extender"></div>
    <% tax_enabled = (@instant_fee.tax_enabled? and @tax_payments.present?) %>
    <div class="list_table_div">
        <table class="gray_table_list" align="center" width="100%" cellpadding="0" cellspacing="0">
            <tr class="main_head">
                <td><%= t('particular') %></td>
                <td class="set_border_right"><%= t('amount') %>(<%=currency%>)</td>
                <td class="set_border_right"><%= "#{t('discount')} %" %></td>
                <% if tax_enabled %>
                  <td class="set_border_right"><%= "#{t('tax_text')} %"%></td>
                <% end %>
                <td class="set_border_right"><%= t('total') %></td>
            </tr>
            <% total_amount = 0 %>
            <% total_net_amount = 0 %>
            <% @instant_fee_details.each do |detail| %>
              <tr class="row-b">
                  <td><%= detail.particular_name %></td>
                  <td class="set_border_right" align="right"><%= precision_label(detail.amount) %> </td>
                  <td class="set_border_right" align="right"> <%= precision_label(detail.discount) %> </td>
                  <% if tax_enabled %>
                    <td class="set_border_right" align="right"> 
                        <%= precision_label(detail.tax) %>
                    </td>                  
                  <% end %>
                  <td class="set_border_right" align="right"><%= precision_label(detail.net_amount) %></td>
                  <% total_amount += detail.amount  unless detail.amount.nil?%>
                  <% total_net_amount += detail.net_amount unless detail.net_amount.nil?%>
              </tr>
            <% end %>
            <tr>
                <td><%=t('total')%></td>
                <td  align="right" class="set_border_right"><label class="amount_label"><%=precision_label(total_amount)%></label></td>
                <td></td>
                <% if tax_enabled %>
                  <td></td>
                <% end %>
                <td align="right" class="set_border_right"><label class="amount_label"><%=precision_label(total_net_amount)%></label></td>
            </tr>
        </table>
        <div class="seprater_div_bottom" style="margin-top: 10px;">
            <div id="inner-tab-menu">
                <ul>
                    <li class='themed_bg themed-dark-hover-background'><%= link_to "#{t('csv_report')}",
                          {:controller => "instant_fees", :action => "instant_fee_report_detail_csv",:id=>params[:id],:csv_report_type => "instant_fee_report", :report_format_type => "csv",:start_date => @start_date, :end_date=>@end_date}%></li>
                </ul>
            </div>
        </div>
    </div>
</div>
