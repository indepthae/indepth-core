<% if @students.present? %>
  <table class="gray_table_list" align="center" width="100%" cellpadding="0" cellspacing="0">
      <%# unless @students.blank? %>
        <tr class="main_head tr-list_head">
            <td class="sl-col">
                <%= t('sl_no') %>
            </td>
            <td class="set_border_right">
                <%= t('first_name') %>
            </td>
            <td class="set_border_right"> <%= t('batch') %></td>
            <td class="set_border_right"> <%= t('adm_no') %></td>
            <% if roll_number_enabled? %>
              <td class="set_border_right"> <%= t('roll_no') %></td>
            <% end %>
            <td class="set_border_right"> <%= t('familyid') %> </td>
            <td class="set_border_right"> <%= t('mobile_number') %> </td>
            <td class="set_border_right"> <%= "#{t('guardian')} #{t('first_name')}" %> </td>
            <td class="set_border_right"> <%= "#{t('guardian')} #{t('last_name')}" %> </td>
            <td class="set_border_right"> <%= t('fees_due') %></td>
            <td class="set_border_right"> <%= t('pay_fees') %></td>
        </tr>
        <% current_page = ((@students.current_page - 1) * @students.per_page) %>        
        <% @students.each_with_index do |student, i| %>
          <tr class="row-b">
              <td class="sl-col"><%= current_page + (i + 1) %></td>
              <td class="set_border_right"><%=student.fullname%></td>
              <td class="set_border_right"><%= student.batch_full_name %></td>
              <td class="set_border_right"><%= student.admission_no %></td>
              <% if roll_number_enabled? %>
                <td class="set_border_right"><%= student.roll_number.present? ? student.roll_number : "-" %></td>
              <% end %>
              <td class="set_border_right"><%= student.familyid %></td>
              <td class="set_border_right"><%=student.phone1%></td>
              <td class="set_border_right"><%=student.guardian_first_name%></td>
              <td class="set_border_right"><%=student.guardian_last_name%></td>
              <td class="set_border_right">
                  <%= precision_label(student.fee_due.to_f +
                    student.total_automatic_finance_fee_fine(@batch_id) + 
                      student.transport_due.to_f + student.hostel_due.to_f) %>
              </td>              
              <td class="set_border_right">
                  <div class="collection-wise">
                      <%= link_to t("collection_wise"),{:controller=>:finance,:action=>:fees_student_dates,:id=>student.id,:breadcrumb_change=>true} %>
                  </div>
                  <div class="pay-all-fees">
                      <% batch_id=params[:fees_submission].present? ? params[:fees_submission][:batch_id] : nil %>
                      <%= link_to t("pay_all_fees"),{:action=>:pay_all_fees,:id=>student.id,:batch_id=>batch_id} %>
                  </div>
              </td>
          </tr>
        <% end %>      
  </table>
  <%= will_paginate @students, :renderer => 'RemoteLinkRenderer',:params=>{:query=>params[:query], :fees_submission=>{:batch_id=>@batch_id}} %>
<% else %>
    <table class="gray_table_list" width="100%" cellspacing="0" cellpadding="0" align="center">
      <tbody>
      <tr class="row-b">
        <td class="col-2"><%= t('no_students_found') %></td>
      </tr>
      </tbody>
    </table>
<% end %>
