var oth = jQuery.noConflict();
(function (oth) {
    oth.fn.hasVerticalScrollBar = function () {
        return this.get(0).scrollHeight > this.height();
    }
    oth.fn.hasHorizontalScrollBar = function () {
        return this.get(0).scrollWidth > this.width();
    }
})(jQuery);


fnAdjustTable = function () {
    show_overlay();
    var colCount = oth('#firstTr>td').length; //get total number of column
    var m = 1;
    var n = 0;
    var i = 0;

    oth('.tableHeader').each(function () {
        var total_sub_width = 0;
        oth('.tsh_' + m).each(function () {
            set_width = oth(this).css('white-space', 'nowrap').outerWidth();
            oth(this).css('white-space', '');
            if (set_width < 250)
            {
                oth(this).css('width', set_width - 40 + "px");
                total_sub_width = total_sub_width + set_width;
            }
            else
            {
                oth(this).css('width', "210px");
                total_sub_width = total_sub_width + 250;
            }
            oth('#table_div td:eq(' + i + ')').children().first().css('width', oth(this).width() + 32);
            i++;
        });
        m++;
        oth(this).css('width', total_sub_width - 20 + "px");
    });



    oth('.tableFirstCol').each(function (col) {
        height = oth(this).height()
        oth('#table_div tr.' + oth(this).attr('id')).children('td').each(function () {
            oth(this).children().first().css('height', height - 16);
        });
        n++;
    });

    oth('#firstTd').css('height', oth('#main_heading').outerHeight());

    if (oth('#table_div').length !== 0 && oth('#table_div').hasVerticalScrollBar())
    {
        oth('#table_div').css('width', oth('#table_div').width() + 11 + "px");
        oth('#divHeader').css('width', oth('#divHeader').width() - 10 + "px");
        var isFirefox = typeof InstallTrigger !== 'undefined';
        if (isFirefox){
            oth('#divHeader').css('width',oth('#divHeader').width() - 6 + "px");
        }
    }
    if (oth('#table_div').length !== 0 && oth('#table_div').hasHorizontalScrollBar() && oth('#firstcol').height() >= 600)
    {
        oth('#table_div').css('height', oth('#table_div').height() + 20 + "px");
        oth('#firstcol').css('height', oth('#firstcol').height() - 10 + "px");
        var isFirefox = typeof InstallTrigger !== 'undefined';
        if (isFirefox){
            oth('#firstcol').css('height',oth('#firstcol').height() - 6 + "px");
        }
        
    }
    else if (oth('#table_div').length !== 0 && !oth('#table_div').hasHorizontalScrollBar()) {
        oth('#table_div').css('border-bottom', '1px solid #ccc');
    }
    oth('.overlay').css('display', 'none');
};

//function to support scrolling of title and first column
fnScroll = function () {
    oth('#divHeader').scrollLeft(oth('#table_div').scrollLeft());
    oth('#firstcol').scrollTop(oth('#table_div').scrollTop());
};

show_overlay = function () {
    if (window.location.pathname.split("/")[2] === "detailed_fa_report")
        oth('.overlay').css('height', oth('table#enclosure').outerHeight() + 45).show();
    else
        oth('.overlay').css('height', oth('table#enclosure').outerHeight()).show();
}

