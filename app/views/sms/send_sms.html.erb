<%if rtl?%>
  <link href="/plugins/select_framework/stylesheets/select-invert.css" media="screen" rel="stylesheet" type="text/css" />
<%else%>
  <link href="/plugins/select_framework/stylesheets/select.css" media="screen" rel="stylesheet" type="text/css" />
<%end%>

<script src="/plugins/select_framework/javascripts/select.js" type="text/javascript"></script>

<div id="content-header">
    <%= show_header_icon %>
    <h1><%= t('message_templates') %></h1>
    <div class='header-sep'>|</div>
    <div class='sub-header'> <%= t('home') %></div>
</div>
<div id="page-yield">
    <div class="bread_crumb">
        <%= make_breadcrumb %>
        <%= render_breadcrumbs  %>
    </div>
    <% unless flash[:notice].nil? %>
      <p class="flash-msg"> <%= flash[:notice] %> </p>
    <% end %>

    <div id="box">
        <div class="error_messages" id="error_messages"></div>
        <div class="user_type_selector">
            <h5 class="field_head"><%= t('send_sms_to') %></h5>
            <label class="check_label">
                <%= radio_button  :user_type_selector, "user_type", "student", :class=>"check" %>
                <%= t('student_text') %>
            </label>
            <label class="check_label">
                <%= radio_button  :user_type_selector, "user_type", "employee", :class=>"check" %>
                <%= t('employee_text') %>
            </label>
            <label class="check_label">
                <%= radio_button  :user_type_selector, "user_type", "guardian", :class=>"check" %>
                <%= t('guardian') %>
            </label>
            <label class="check_label">
                <%= radio_button  :user_type_selector, "user_type", "group", :class=>"check" %>
                <%= t('group') %>
            </label>
        </div>
        <div id="intermediate_selector" class="intermediate_selector"></div>
        <div id="send_portion" class="send_portion"></div>
    </div>
</div>

<script>
  var user_selector = new FedenaSelector.select();
  var grouped_batches;
  var url;

  j("input[type=radio][name='user_type_selector[user_type]']").change(function () {
      var user_type = j(this).val()
      if (user_type == 'student') {
          url = 'load_student_sms_send'
      }
      else if (user_type == 'employee') {
          url = 'load_employee_sms_send'
      }
      else if (user_type == 'guardian') {
          url = 'load_guardian_sms_send'
      }
      else if (user_type == 'group'){
         url = 'user_type_selection'
      }


      j.ajax({
          url: url,
          type: 'POST',
          data: {user_type: j(this).val()},
          success: function (data, textStatus, jqXHR)
          {
          },
          error: function (jqXHR, textStatus, errorThrown)
          {
          }
      });
  });
  
  
   function fetch_sms_length(elm)
  {
    text = j(elm).val();
    count = text.length;
    j('#sms_word_count').text(count);
  }
</script>




