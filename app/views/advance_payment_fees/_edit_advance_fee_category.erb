<label class="head_label"><%= t('edit_advance_fee_category_text') %></label>


<div id="grading-levels-form" >

  <% form_remote_for @advance_fee_category, :url => {:controller => "advance_payment_fees", :action => 'update_advance_fee_category', :id => @advance_fee_category.id},
                     :before => "$('submit_button').disable()",
                     :complete => "setTimeout(function(){$('submit_button').enable();},5000)" do |f| %>
      <div id="form-errors"></div>

      <div class="label-field-pair">
        <div class="label-container">
          <label for="name"><%= "#{t('name')}" %><span class="necessary-field">*</span></label>
        </div>
        <div class="input-container"><%= f.text_field :name %></div>
      </div>

      <div class="label-field-pair">
        <div class="label-container"><%= f.label "#{t('description')}" %></div>
        <div class="input-container"><%= f.text_field :description %></div>
      </div>

      <div class="label-field-pair">
        <label for="method"><%= t('enable_online_payment_for_advance_payment') %></label>
        <div class="online-opt-block">
          <%= f.radio_button "online_payment_enabled", "1", :checked => @advance_fee_category.online_payment_enabled, :class => "something" %>
          <%= f.label :online_payment_enabled, t('yes_text') %>
          <%= f.radio_button :online_payment_enabled, "0", :checked => !@advance_fee_category.online_payment_enabled, :class => "something" %>
          <%= f.label :online_payment_enabled, t('no_texts') %>
        </div>
      </div>

      <div class="label-field-pair">
        <div class="label-container"><label><%= t('select_a_batch') %> :</label></div>
        <div class="batches">
          <div class="sel-list">
            <%= t('select') %>
            : <%= link_to_function t('all'), "select_all_batches();" %>
            ,
            <%= link_to_function t('none'), "deselect_all_batches();"%>
          </div>
          <% batch_ids = @a_f_c_batches.collect(&:batch_id) %>
          <% @batches.each do |f| %>
            <div class="each_batch">
              <%= check_box_tag "batch", '', (batch_ids.include? f.id and @advance_fee_category.batch_status(@advance_fee_category.id, f.id)) ? true : false, {:disabled => (@advance_fee_category.check_the_batches_editable(@advance_fee_category.id).include? f.id.to_s) ? true : false, :onclick => "activate_the_batch(this, '#{f.id}')", :class => "batch-status#{f.id}"} %>
              <%= hidden_field_tag "batches[#{f.id}][advance_fee_category_id]", @advance_fee_category.id %>
              <%= hidden_field_tag "batches[#{f.id}][batch_id]", f.id %>
              <%= hidden_field_tag "batches[#{f.id}][is_active]", @advance_fee_category.batch_status(@advance_fee_category.id, f.id), :class => "batch-select", :index => f.id %>
              <label><%= f.full_name %></label>
            </div>
          <% end %>
        </div>
      </div>

      <div class="extender" style="height:20px"></div>
      <div id="sub-button">
        <%= submit_tag "â–º #{t('update')}", {:class => 'submit_button', :id => 'submit_button'} %>
      </div>
  <% end %>
</div>