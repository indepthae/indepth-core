
<div class="content">
  <div class="generated_certificates">
    <table class="primary">
      <tr>
        <th><%= t('sl_no') %></th>
        
        <th> <%= t('date_text') %> </th>
        <th  class="links"> </th>
      </tr>
      
      <%if @bulk_generated_certificates.present? %>
      <%sl_no = ((params[:page].present? ? params[:page].to_i - 1 : 0)* @per_page ) + 1 %>
      <%@bulk_generated_certificates.each do |c|%>
      <tr <%= "class='currently_created'" if params[:currently_created].present? && c.id == params[:currently_created].to_i %> >
        <td  class="center_text"><%= sl_no %></td>
        <%sl_no = sl_no + 1%>
        <td class="center_text"><%= format_date(c.issued_on) %>
        <td class="center_text">
          <%if c.generated_pdf.present? %>
            <%=link_to t('download'), c.generated_pdf.pdf.url(:original,false), :class=>"themed_text", :target => "_blank"%> &nbsp; | &nbsp;
          <%else%>
            <%=link_to t('download'), generate_bulk_export_pdf_certificate_templates_path(:bulk_generated_certificate_id=>c.id), :class=>"themed_text", :target => "_blank"%> &nbsp; | &nbsp;
          <%end%>
          <%=link_to t('delete'), delete_bulk_generated_certificate_certificate_templates_path(:id=>c.id,:page=>params[:page]), :class=>"themed_text delete_links_bulk" %>
        </td>
      </tr>
      <%end%>
      <%else%>
      <tr>
        <td class="center_text" colspan="3"> <%= t('no_bulk_generated_certificate_present') %> </td>
      </tr>
      <%end%>
      </table>
      <div class="paginate_box">
        <%= will_paginate @bulk_generated_certificates, :renderer => 'RemoteLinkRenderer',:params=>{:controller => "certificate_templates",:action => "bulk_generated_certificates_list",
          :certificate_template_id => params[:certificate_template_id], :academic_year_id => params[:academic_year_id] }%>
      </div>
  </div>

</div>

<script>
var pass_through = false;
function delete_confirmed(elem) {
  (function () {

    var e = elem;

    j('#yes').click(function () {
      remove_popup_box();
      pass_through = true;
      e.click();
      pass_through = false;
    });
  })();
}

j(".delete_links_bulk").click(function (e) {
  if (pass_through == false) {
    e.preventDefault();
  }
  make_popup_box(this, 'confirm', "<%=t('delete_generated_certificate_desc')%> ", {
    'ok': "<%=t('delete')%>",
    'cancel': "<%=t('cancel')%>",
    'title': "<%=t('delete_generated_certificate')%>",
    'popup_class': 'remove_lt',
    'return_status': true
  });
  return delete_confirmed(this);
});
</script>